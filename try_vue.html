<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Marimekko Inventory Status Component</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="src/css/lib/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/global.css" />
    <link rel="stylesheet" href="src/css/lib/select2.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/mari-select2.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/inventory.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/reserve-collect.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/button.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/input.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="dest/css/qty-selector.css" />
    <script src='src/js/lib/jquery-3.3.1.min.js'></script>
    <script src="src/js/lib/bootstrap.min.js"></script>
    <script src="src/js/lib/select2.min.js"></script>
    <script src="src/js/lib/vue.js"></script>
    <script src="dest/js/inventory.js"></script>
    <script src="dest/js/form-validation.js"></script>
    <script src="dest/js/qty-selector.js"></script>
    <script src="dest/js/email-me.js"></script>
</head>

<body class='catalog-product-view'>
    <ul class="list-size" style='display: none'>
        <li>haha</li>
        <!-- <li>haha</li> -->
    </ul>
    <div class='rich-product-page product-page-wrapper'>
        <!-- Raw data of onesize product attributes -->
        <div class="product-data-mine1" data-attributeids="[141]" data-messagemoreoptions="You must specify all product options before adding it to the cart" data-confproductid="49337" data-lookup="{'69':{'qty':9991,'stock_status':1,'sku':'6411253780900','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-18848\' itemprop=\'price\'>\n                                           <span class=\'price\'>37,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':37,'size':'onesize','id':18848,'parent_attribute_code':'size'}}"></div>
        <!-- Raw data of sizable product attributes -->
        <div class="product-data-mine2" data-attributeids="[141]" data-messagemoreoptions="You must specify all product options before adding it to the cart" data-confproductid="51745" data-lookup="{'19':{'qty':6,'stock_status':1,'sku':'6411254317884','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-51746\' itemprop=\'price\'>\n                                           <span class=\'price\'>65,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'L','id':51746,'parent_attribute_code':'size'},'18':{'qty':5,'stock_status':1,'sku':'6411254317877','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-51747\' itemprop=\'price\'>\n                                           <span class=\'price\'>65,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'M','id':51747,'parent_attribute_code':'size'},'17':{'qty':78,'stock_status':1,'sku':'6411254317860','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-51748\' itemprop=\'price\'>\n                                           <span class=\'price\'>65,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'S','id':51748,'parent_attribute_code':'size'},'20':{'qty':7,'stock_status':1,'sku':'6411254317891','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-51749\' itemprop=\'price\'>\n                                           <span class=\'price\'>65,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'XL','id':51749,'parent_attribute_code':'size'},'47':{'qty':4,'stock_status':1,'sku':'6411254317853','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n                \n    <div class=\'price-box\'>\n                                                            <span class=\'regular-price\' id=\'product-price-51750\' itemprop=\'price\'>\n                                           <span class=\'price\'>65,00\u00a0EUR<\/span>                                    <\/span>\n                        \n    \n        \n    <\/div>\n\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/InStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'XS','id':51750,'parent_attribute_code':'size'},'21':{'qty':0,'stock_status':0,'sku':'6411254317907','price':'\n\n\n    <div class=\'price-wrapper\' itemprop=\'offers\' itemscope itemtype=\'http:\/\/schema.org\/Offer\'>\n    <div class=\'price-box sold-out\'>\n        Tilap\u00e4isesti loppu    <\/div>\n        <meta itemprop=\'priceCurrency\' content=\'EUR\' \/>\n        <meta itemprop=\'availability\' content=\'http:\/\/schema.org\/OutOfStock \' \/>\n    <\/div>\n\n','price_numeric':65,'size':'XXL','id':51751,'parent_attribute_code':'size'}}"></div>
        
        <!-- Simulate the product info block -->
        <div class="product-essential" style="display: none">
            <div class="product-shop">
                <div class="product-name">
                    <h1>
                        <span style="color:rgb(255, 186, 25);">-50%</span> Feeni Ruusuruoho
                        <span class="product-secondary-name">-tunika</span>
                        <span class="product-color-variant product-color-variant-title">l.valkoinen, musta</span>
                    </h1>
                </div>
                
                <div class="product-shop">
                    <div class="price-box-configurable">
                        <div class="price-wrapper">
                            <div class="price-box">
                                <p class="old-price">
                                    <span class="price" id="old-price-42200">
                                        120,00 </span>
                                </p>
                                <p class="special-price">
                                    <span class="price" id="product-price-42200">
                                        60,00&nbsp;EUR </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class='store-inventory' id='inventory-app'>
            <div class='store-inventory-toggle clearfix'>
                <div class='toggle-icon'></div>
                <div class='toggle-link' data-product-param='{"product_id":"065808", "color_id":"601"}' @click='toggleDropdown'>Katso saatavuus myymälöissä</div>
            </div>
            <div class='store-inventory-info' v-if='showDropdown'>
              
                <city-select2 :class="dropDownClass" :options="cityList" @change="switchList">
                </city-select2>

                <!-- User guidance -->
                <div class='instruction'>
                    <div class='instruction-text'>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    </div>
                    <ul class="instruction-demo">
                        <li class='green'>
                            <span class='icon'></span>Varastossa</li>
                        <li class='orange'>
                            <span class='icon'></span>Vähän jäljellä</li>
                        <li class='red'>
                            <span class='icon'></span>Loppuunmyyty</li>
                    </ul>
                </div>

                <div class="store-list">
                    <template v-if='cityData'>
                        <store-inventory-list
                            v-for='(item, index) in cityData'
                            :store-name='item.title'
                            :contact='item.contact_details'
                            :own-store="typeof item.sizes !== 'undefined'"
                            :opening-hours="item.opening_hours"
                            :country-code='countryCode'
                            :sizes='item.sizes'
                            :key='item.storeId'
                            :index='index'
                            :store-id='item.company_store_id'
                            :store-type='item.storeType'
                            :product-type='productParams.type'
                            :product-mapping='productParams.product_mapping'
                        ></store-inventory-list>
                        <!-- Bootstrap Modal component to render reserve & collect window -->
                        <div class="modal fade" id="reserve-overlay" tabindex="-1" role="dialog" aria-labelledby="reserveModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <a class='close-section clearfix' data-dismiss="modal" aria-label="Close">
                                            <div class='txt'>Close</div>
                                            <div class="icon"></div>
                                        </a>
                                        <div class="modal-title" id="reserveModalLabel">Reserve & Collect</div>
                                    </div>
                                    <div class="modal-body reserve-form clearfix">
                                         <reserve-product-block
                                            :product-type='productParams.type'
                                            :store-contact='storeContactInReserveForm'
                                         ></reserve-product-block>
                                        <div class='reserve-form--contact'>
                                            <div class='form-title'>Personal info</div>
                                            <input type='text' class='mari-input mari-input--text mari-input--text-sm mari-input--text-primary reservation-fname' placeholder="First name *"
                                                value='Kan' required>
                                            <input type='text' class='mari-input mari-input--text mari-input--text-sm mari-input--text-primary reservation-lname' placeholder="Last name *"
                                                value='Cong' required>
                                            <input class='mari-input mari-input--text mari-input--text-sm mari-input--text-primary reservation-phone' placeholder="Phone number *"
                                                pattern="\+?\d{9,}" value='0443213407' required>
                                            <input class='mari-input mari-input--text mari-input--text-sm mari-input--text-primary reservation-email' placeholder="Email address *"
                                                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" value='kcongmj23@gmail.com' required>
                                            <div class='btn-section'>
                                                <button class='reserve-submit mari-btn mari-btn-lg mari-btn-primary'>Reserve</button>
                                                <button class='reserve-cancel mari-btn mari-btn-lg mari-btn-secondary' data-dismiss="modal" aria-label="Close">Cancel</button>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="modal-body success-msg">
                                        Thanks for make the reservation, the store will contact you when product is ready to pick up.
                                    </div>
                                    <div class="modal-body error-msg">
                                        SOrry, something went wrong when doing the reservation request, please try again later.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>

                 <store-contact-overlay
                    :store-contact="storeContactOverlay"
                    v-if="storeContactOverlay"
                 ></store-contact-overlay>
                
            </div>
        </div>
    
        <!-- Popup Contact Overlay -->
        <script type="text/x-template" id="store-contact-overlay">
            <!-- Bootstrap Modal component to render pop-up window -->
            <div class="modal fade" id="contact-overlay" tabindex="-1" role="dialog" aria-labelledby="contactModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <a class='close-section clearfix' data-dismiss="modal" aria-label="Close">
                                <div class="icon"></div>
                            </a>
                            <div class="modal-title" id="contactModalLabel">{{storeContact.name}}</div>
                        </div>
                        <div class="modal-body contact clearfix">
                            <div class='contact-section'>
                                {{storeContact.address[0]}}<br>
                                {{storeContact.address[1]}}<br>
                                {{storeContact.address[2]}}
                            </div>
                            <br>
                            <div class='contact-section'>Avoinna:
                                <br>Arkisin {{storeContact.openingHours.weekday}}
                                <br>lauantai {{storeContact.openingHours.saturday}}
                                <br>sunnuntai {{storeContact.openingHours.sunday}}
                            </div>
                            <br>
                            <div class='contact-section'>{{storeContact.phone}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </script>

        <!-- Store inventory block template -->
        <script type="text/x-template" id="store-inventory-template">
    
            <div class='store-item' :class="'store-item--' + productType">
                <div class='store-title'>
                    <span @click="setContactFormOverlay" class='store-title-name' title="<?php echo $this->__('Myymälän yhteystiedot');?>">{{storeName}}</span>
                    <span class='store-title-phone'>{{contact.phone}}</span>
                </div>
                <div class='store-status clearfix'>
                    <template v-if="ownStore">
                        <template v-if="productType === 'sizable'">
                            <div class='store-status-item'
                                v-for='size in sizes'
                                :class='getInventoryGroupClass(size.level)'
                            >{{size.product_size}}</div>
                        </template>
                        <div class='store-status-item'
                            :class='getInventoryGroupClass(sizes[0].level)'
                            v-else
                        >{{oneSizeMapping[locale][sizes[0].level]}}</div>
                    </template>
                    <template v-else>
                        <div class="store-status-item--null">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
                    </template>
                </div>
                <template v-if='hasInventory'>
                    <!-- Reserve & collect button -->
                    <a @click='prepareReserveForm' class="reserve-btn mari-btn mari-btn-lg mari-btn-secondary">Varaa myymälössä</a>
                </template>
            </div>
        </script>

        <script type='text/x-template' id='reserve-product-template'>
            <div class='reserve-form--product'>
                <div class='store'>
                    <div class="store-icon"></div>
                    <div class="store-info">
                        <div class="store-info--name">{{storeContact.name}}</div>
                        <div class="store-info--phone">{{storeContact.phone}}</div>
                    </div>
                </div>
                <div class='product-attribute clearfix'>
                    <div class="left-side">
                        <img class='product-img' src="dest/img/test_product.jpg">
                    </div>
                    <div class="right-side">
                        <div class="product-name">
                            <h1>
                                <span style="color:rgb(255, 186, 25);">-50%</span> Feeni Ruusuruoho
                                <span class="product-secondary-name">-tunika</span>
                                <span class="product-color-variant product-color-variant-title">l.valkoinen, musta</span>
                            </h1>
                        </div>
                        <div class='product-price'>
                            <p class="old-price">
                                <span class="price" id="old-price-42200">
                                    120,00 </span>
                            </p>
                            <p class="special-price">
                                <span class="price" id="product-price-42200">
                                    60,00&nbsp;EUR </span>
                            </p>
                        </div>
                        <div class='qty-selector' v-if="productType === 'onesize'">
                            <span class="qty-minus"></span>
                            <span class="qty-val">1</span>
                            <input type="number" hidden min='1' max='10' class="qty-input" value="1">
                            <input hidden name='product-id' class='product-id'>
                            <span class="qty-plus"></span>
                        </div>
                        <div class='size-selector' v-else>
                            <size-select2 class="size-list">
                            </size-select2>
                            <div id="custom-size-select2-dropdown-wrapper"></div>
                        </div>
                    </div>
                </div>
                <input hidden name='store-id' class='store-id'>
            </div>
        </script>



    </div>



</body>

</html>